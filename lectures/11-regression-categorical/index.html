<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  
  
  <meta name="generator" content="Wowchemy 5.0.0-beta.1 for Hugo">
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Regression with Categorical Predictors This set of notes will explore using linear regression for a single predictor attribute that is categorical instead of continuous. To explore this first, let&rsquo;s explore some data.">

  
  <link rel="alternate" hreflang="en-us" href="https://psqf6243.brandonlebeau.org/lectures/11-regression-categorical/">

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

  
  
  
  <meta name="theme-color" content="#1565c0">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" media="print" onload="this.media='all'">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js" integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.3aad675291f323c3cd47ae187f0bf0d6.css">

  




  

  


  
  

  

  
  <link rel="manifest" href="/index.webmanifest">
  

  <link rel="icon" type="image/png" href="/images/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="https://psqf6243.brandonlebeau.org/lectures/11-regression-categorical/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="PSQF 6243">
  <meta property="og:url" content="https://psqf6243.brandonlebeau.org/lectures/11-regression-categorical/">
  <meta property="og:title" content="Regression Categorical | PSQF 6243">
  <meta property="og:description" content="Regression with Categorical Predictors This set of notes will explore using linear regression for a single predictor attribute that is categorical instead of continuous. To explore this first, let&rsquo;s explore some data."><meta property="og:image" content="https://psqf6243.brandonlebeau.org/media/blue-balloon.jpg">
  <meta property="twitter:image" content="https://psqf6243.brandonlebeau.org/media/blue-balloon.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2022-10-27T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2022-10-27T00:00:00&#43;00:00">
  

  



  


  


  





  <title>Regression Categorical | PSQF 6243</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper  ">

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7de282f2047be3c570af3a58788341e7.js"></script>

  

<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">PSQF 6243</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">PSQF 6243</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#logistics"><span>Logistics</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/content/"><span>Content</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/lectures/"><span>Lecture Notes</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/assignments/"><span>Assignments</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/code/"><span>Software Resources</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#people"><span>People</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    





<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <button class="form-control sidebar-search js-search">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">Search...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      
      
      


  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
        <li class=""><a href="/lectures/">Lecture Notes</a></li>
    
      


  <li class=""><a href="/lectures/01-review/">Review</a></li>



  <li class=""><a href="/lectures/01-review-class/">Review - Class</a></li>



  <li class=""><a href="/lectures/02-linear-regression/">Introduction to Linear Regression</a></li>



  <li class=""><a href="/lectures/02-linear-regression-class/">Introduction to Linear Regression - Class Notes</a></li>



  <li class=""><a href="/lectures/03-regression-estimates/">Regression Estimates</a></li>



  <li class=""><a href="/lectures/04-least-squares-simulation/">Least Squares Simulation</a></li>



  <li class=""><a href="/lectures/05-regression-inference/">Regression Inference</a></li>



  <li class=""><a href="/lectures/06-t-vs-norm/">t-distribution vs Normal distribution</a></li>



  <li class=""><a href="/lectures/07-regression-conditions/">Data Conditions for Valid Inference</a></li>



  <li class=""><a href="/lectures/08-bootstrap/">Bootstrap</a></li>



  <li class=""><a href="/lectures/09-multiple-regression/">Multiple Regression</a></li>



  <li class=""><a href="/lectures/10-model-comparison/">Model Comparisons</a></li>



  <li class="active"><a href="/lectures/11-regression-categorical/">Regression Categorical</a></li>



  <li class=""><a href="/lectures/12-pairwise/">Pairwise Contrasts</a></li>



  <li class=""><a href="/lectures/13-multiple-categorical/">Multiple Categorical Attributes</a></li>



  <li class=""><a href="/lectures/14-ancova/">Analysis of Covariance</a></li>

      
    

    
      </ul>
    

  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#regression-with-categorical-predictors">Regression with Categorical Predictors</a>
      <ul>
        <li><a href="#question">Question</a></li>
        <li><a href="#linear-regression-with-categorical-attributes">Linear Regression with Categorical Attributes</a>
          <ul>
            <li><a href="#dummyindicator-coding">Dummy/Indicator Coding</a></li>
          </ul>
        </li>
        <li><a href="#values-other-than-01">Values other than 0/1</a></li>
        <li><a href="#generalize-to-more-than-2-groups">Generalize to more than 2 groups</a></li>
      </ul>
    </li>
  </ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          

          <h1>Regression Categorical</h1>

          <div class="article-style">
            <h1 id="regression-with-categorical-predictors">Regression with Categorical Predictors</h1>
<p>This set of notes will explore using linear regression for a single predictor attribute that is categorical instead of continuous. To explore this first, let&rsquo;s explore some data.</p>
<pre><code class="language-r">library(tidyverse)
</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.1      ✔ stringr 1.4.1 
## ✔ readr   2.1.2      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
</code></pre>
<pre><code class="language-r">library(Lahman)
library(ggformula)
</code></pre>
<pre><code>## Loading required package: ggstance
## 
## Attaching package: 'ggstance'
## 
## The following objects are masked from 'package:ggplot2':
## 
##     geom_errorbarh, GeomErrorbarh
## 
## Loading required package: scales
## 
## Attaching package: 'scales'
## 
## The following object is masked from 'package:purrr':
## 
##     discard
## 
## The following object is masked from 'package:readr':
## 
##     col_factor
## 
## Loading required package: ggridges
## 
## New to ggformula?  Try the tutorials: 
## 	learnr::run_tutorial(&quot;introduction&quot;, package = &quot;ggformula&quot;)
## 	learnr::run_tutorial(&quot;refining&quot;, package = &quot;ggformula&quot;)
</code></pre>
<pre><code class="language-r">theme_set(theme_bw(base_size = 18))

career &lt;- Batting %&gt;%
  filter(AB &gt; 100) %&gt;%
  anti_join(Pitching, by = &quot;playerID&quot;) %&gt;%
  filter(yearID &gt; 1990) %&gt;%
  group_by(playerID, lgID) %&gt;%
  summarise(H = sum(H), AB = sum(AB)) %&gt;%
  mutate(average = H / AB)
</code></pre>
<pre><code>## `summarise()` has grouped output by 'playerID'. You can override using the
## `.groups` argument.
</code></pre>
<pre><code class="language-r">career &lt;- People %&gt;%
  tbl_df() %&gt;%
  dplyr::select(playerID, nameFirst, nameLast) %&gt;%
  unite(name, nameFirst, nameLast, sep = &quot; &quot;) %&gt;%
  inner_join(career, by = &quot;playerID&quot;) %&gt;%
  dplyr::select(-playerID)
</code></pre>
<pre><code>## Warning: `tbl_df()` was deprecated in dplyr 1.0.0.
## ℹ Please use `tibble::as_tibble()` instead.
</code></pre>
<pre><code class="language-r">head(career)
</code></pre>
<pre><code>## # A tibble: 6 × 5
##   name               lgID      H    AB average
##   &lt;chr&gt;              &lt;fct&gt; &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;
## 1 Jeff Abbott        AL      127   459   0.277
## 2 Kurt Abbott        AL       33   123   0.268
## 3 Kurt Abbott        NL      455  1780   0.256
## 4 Reggie Abercrombie NL       54   255   0.212
## 5 Brent Abernathy    AL      194   767   0.253
## 6 Shawn Abner        AL       81   309   0.262
</code></pre>
<h2 id="question">Question</h2>
<p>Suppose we are interested in the batting average of baseball players since 1990, that is, the average is:</p>
<p>$$
average = \frac{number\ of\ hits}{number\ of\ atbats}
$$</p>
<p>Let&rsquo;s first visualize this.</p>
<pre><code class="language-r">gf_density(~ average, data = career) %&gt;%
  gf_labs(x = &quot;Batting Average&quot;)
</code></pre>
<p><img src="/lectures/11-regression-categorical_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>What if we hypothesized that the batting average will differ based on the league that players played in.</p>
<pre><code class="language-r">gf_violin(lgID ~ average, data = career, fill = 'gray80', draw_quantiles = c('0.1', '0.5', '0.9')) %&gt;%
  gf_labs(x = &quot;Batting Average&quot;,
          y = &quot;League&quot;)
</code></pre>
<p><img src="/lectures/11-regression-categorical_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The distributions seem similar, but what if we wanted to go a step further and estimate a model to explore if there are really differences or not. For example, suppose we were interested in:</p>
<p>$$
H_{0}: \mu_{NL} = \mu_{AL}
$$</p>
<p>What type of model could we use? What about linear regression?</p>
<h2 id="linear-regression-with-categorical-attributes">Linear Regression with Categorical Attributes</h2>
<p>Since these notes are happening, you can assume it is possible. But how can a categorical attribute with categories rather than numbers be included in the linear regression model?</p>
<p>The answer is that they can&rsquo;t. We need a new representation of the categorical attribute, enter dummy or indicator coding.</p>
<h3 id="dummyindicator-coding">Dummy/Indicator Coding</h3>
<p>Suppose we use the following logic:</p>
<p>If NL, then give a value of 1, else give a value of 0.</p>
<p>Does this give the same information as before?</p>
<table>
<thead>
<tr>
<th>League ID</th>
<th>Dummy League ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>AL</td>
<td>0</td>
</tr>
<tr>
<td>NL</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>What would this look like for the actual data?</p>
<pre><code class="language-r">career &lt;- career %&gt;%
  mutate(league_dummy = ifelse(lgID == 'NL', 1, 0))

head(career, n = 10)
</code></pre>
<pre><code>## # A tibble: 10 × 6
##    name               lgID      H    AB average league_dummy
##    &lt;chr&gt;              &lt;fct&gt; &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;        &lt;dbl&gt;
##  1 Jeff Abbott        AL      127   459   0.277            0
##  2 Kurt Abbott        AL       33   123   0.268            0
##  3 Kurt Abbott        NL      455  1780   0.256            1
##  4 Reggie Abercrombie NL       54   255   0.212            1
##  5 Brent Abernathy    AL      194   767   0.253            0
##  6 Shawn Abner        AL       81   309   0.262            0
##  7 Shawn Abner        NL       19   115   0.165            1
##  8 Bobby Abreu        AL      858  3061   0.280            0
##  9 Bobby Abreu        NL     1602  5373   0.298            1
## 10 Jose Abreu         AL     1262  4353   0.290            0
</code></pre>
<p>Now that there is a numeric attribute, these can be added into the linear regression model.</p>
<pre><code class="language-r">average_lm &lt;- lm(average ~ league_dummy, data = career)

broom::tidy(average_lm)
</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term         estimate std.error statistic p.value
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)   0.253    0.000761   332.      0    
## 2 league_dummy  0.00102  0.00107      0.949   0.343
</code></pre>
<p>How are these terms interpreted now?</p>
<pre><code class="language-r">df_stats(average ~ league_dummy, data = career, mean, sd, length)
</code></pre>
<pre><code>##   response league_dummy      mean         sd length
## 1  average            0 0.2525899 0.02876352   1431
## 2  average            1 0.2536090 0.02879563   1440
</code></pre>
<pre><code class="language-r">average_lm2 &lt;- lm(average ~ lgID, data = career)

broom::tidy(average_lm2)
</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term        estimate std.error statistic p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)  0.253    0.000761   332.      0    
## 2 lgIDNL       0.00102  0.00107      0.949   0.343
</code></pre>
<pre><code class="language-r">t.test(average ~ lgID, data = career, var.equal = TRUE)
</code></pre>
<pre><code>## 
## 	Two Sample t-test
## 
## data:  average by lgID
## t = -0.9487, df = 2869, p-value = 0.3429
## alternative hypothesis: true difference in means between group AL and group NL is not equal to 0
## 95 percent confidence interval:
##  -0.003125489  0.001087227
## sample estimates:
## mean in group AL mean in group NL 
##        0.2525899        0.2536090
</code></pre>
<h2 id="values-other-than-01">Values other than 0/1</h2>
<p>First, I want to build off of the first part of the notes on regression with categorical predictors. Before generalizing to more than two groups, let&rsquo;s first explore what happens when values other than 0/1 are used for the categorical attribute. The following three dummy/indicator attributes will be used:</p>
<ol>
<li>1 = NL, 0 = AL</li>
<li>1 = NL, 2 = AL</li>
<li>100 = NL, 0 = AL</li>
</ol>
<p>Make some predictions about what you think will happen in the three separate regressions?</p>
<pre><code class="language-r">library(tidyverse)
library(Lahman)
library(ggformula)

theme_set(theme_bw(base_size = 18))

career &lt;- Batting %&gt;%
  filter(AB &gt; 100) %&gt;%
  anti_join(Pitching, by = &quot;playerID&quot;) %&gt;%
  filter(yearID &gt; 1990) %&gt;%
  group_by(playerID, lgID) %&gt;%
  summarise(H = sum(H), AB = sum(AB)) %&gt;%
  mutate(average = H / AB)
</code></pre>
<pre><code>## `summarise()` has grouped output by 'playerID'. You can override using the
## `.groups` argument.
</code></pre>
<pre><code class="language-r">career &lt;- People %&gt;%
  tbl_df() %&gt;%
  dplyr::select(playerID, nameFirst, nameLast) %&gt;%
  unite(name, nameFirst, nameLast, sep = &quot; &quot;) %&gt;%
  inner_join(career, by = &quot;playerID&quot;) %&gt;%
  dplyr::select(-playerID)

career &lt;- career %&gt;%
  mutate(league_dummy = ifelse(lgID == 'NL', 1, 0),
         league_dummy_12 = ifelse(lgID == 'NL', 1, 2),
         league_dummy_100 = ifelse(lgID == 'NL', 100, 0))

head(career, n = 10)
</code></pre>
<pre><code>## # A tibble: 10 × 8
##    name               lgID      H    AB average league_dummy league_du…¹ leagu…²
##    &lt;chr&gt;              &lt;fct&gt; &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;
##  1 Jeff Abbott        AL      127   459   0.277            0           2       0
##  2 Kurt Abbott        AL       33   123   0.268            0           2       0
##  3 Kurt Abbott        NL      455  1780   0.256            1           1     100
##  4 Reggie Abercrombie NL       54   255   0.212            1           1     100
##  5 Brent Abernathy    AL      194   767   0.253            0           2       0
##  6 Shawn Abner        AL       81   309   0.262            0           2       0
##  7 Shawn Abner        NL       19   115   0.165            1           1     100
##  8 Bobby Abreu        AL      858  3061   0.280            0           2       0
##  9 Bobby Abreu        NL     1602  5373   0.298            1           1     100
## 10 Jose Abreu         AL     1262  4353   0.290            0           2       0
## # … with abbreviated variable names ¹​league_dummy_12, ²​league_dummy_100
</code></pre>
<pre><code class="language-r">average_lm &lt;- lm(average ~ league_dummy, data = career)

broom::tidy(average_lm)
</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term         estimate std.error statistic p.value
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)   0.253    0.000761   332.      0    
## 2 league_dummy  0.00102  0.00107      0.949   0.343
</code></pre>
<pre><code class="language-r">average_lm_12 &lt;- lm(average ~ league_dummy_12, data = career)

broom::tidy(average_lm_12)
</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term            estimate std.error statistic p.value
##   &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)      0.255     0.00170   150.      0    
## 2 league_dummy_12 -0.00102   0.00107    -0.949   0.343
</code></pre>
<pre><code class="language-r">average_lm_100 &lt;- lm(average ~ league_dummy_100, data = career)

broom::tidy(average_lm_100)
</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term              estimate std.error statistic p.value
##   &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)      0.253     0.000761    332.      0    
## 2 league_dummy_100 0.0000102 0.0000107     0.949   0.343
</code></pre>
<p>Before moving to more than 2 groups, any thoughts on how we could run a one-sample t-test using a linear regression? For example, suppose this null hypothesis wanted to be explored.</p>
<p>$$
H_{0}: \mu_{BA} = .2
$$</p>
<p>$$
H_{A}: \mu_{BA} \neq .2
$$</p>
<h2 id="generalize-to-more-than-2-groups">Generalize to more than 2 groups</h2>
<p>The ability to use regression with categorical attributes of more than 2 groups is possible and an extension of the 2 groups model shown above. First, let&rsquo;s think about how we could represent three categories as numeric attributes. Suppose we had the following 4 categories of baseball players.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Position</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Outfield</td>
</tr>
<tr>
<td style="text-align:left">Infield</td>
</tr>
<tr>
<td style="text-align:left">Catcher</td>
</tr>
<tr>
<td style="text-align:left">Designated Hitter</td>
</tr>
</tbody>
</table>
<pre><code class="language-r">library(GeomMLBStadiums)

ggplot() + 
  geom_mlb_stadium(stadium_segments = &quot;all&quot;) + 
  facet_wrap(~team) + 
  coord_fixed() + 
  theme_void()
</code></pre>
<p><img src="/lectures/11-regression-categorical_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre><code class="language-r">library(tidyverse)
library(Lahman)
library(ggformula)

theme_set(theme_bw(base_size = 18))

career &lt;- Batting %&gt;%
  filter(AB &gt; 100) %&gt;%
  anti_join(Pitching, by = &quot;playerID&quot;) %&gt;%
  filter(yearID &gt; 1990) %&gt;%
  group_by(playerID, lgID) %&gt;%
  summarise(H = sum(H), AB = sum(AB)) %&gt;%
  mutate(average = H / AB)
</code></pre>
<pre><code>## `summarise()` has grouped output by 'playerID'. You can override using the
## `.groups` argument.
</code></pre>
<pre><code class="language-r">career &lt;- Appearances %&gt;%
  filter(yearID &gt; 1990) %&gt;%
  select(-GS, -G_ph, -G_pr, -G_batting, -G_defense, -G_p, -G_lf, -G_cf, -G_rf) %&gt;%
  rowwise() %&gt;%
  mutate(g_inf = sum(c_across(G_1b:G_ss))) %&gt;%
  select(-G_1b, -G_2b, -G_3b, -G_ss) %&gt;%
  group_by(playerID, lgID) %&gt;%
  summarise(catcher = sum(G_c),
            outfield = sum(G_of),
            dh = sum(G_dh),
            infield = sum(g_inf),
            total_games = sum(G_all)) %&gt;%
  pivot_longer(catcher:infield,
               names_to = &quot;position&quot;) %&gt;%
  filter(value &gt; 0) %&gt;%
  group_by(playerID, lgID) %&gt;%
  slice_max(value) %&gt;%
  select(playerID, lgID, position) %&gt;%
  inner_join(career)
</code></pre>
<pre><code>## `summarise()` has grouped output by 'playerID'. You can override using the
## `.groups` argument.
## Joining, by = c(&quot;playerID&quot;, &quot;lgID&quot;)
</code></pre>
<pre><code class="language-r">career &lt;- People %&gt;%
  tbl_df() %&gt;%
  dplyr::select(playerID, nameFirst, nameLast) %&gt;%
  unite(name, nameFirst, nameLast, sep = &quot; &quot;) %&gt;%
  inner_join(career, by = &quot;playerID&quot;)

career &lt;- career %&gt;%
  mutate(league_dummy = ifelse(lgID == 'NL', 1, 0))

count(career, position)
</code></pre>
<pre><code>## # A tibble: 4 × 2
##   position     n
##   &lt;chr&gt;    &lt;int&gt;
## 1 catcher    410
## 2 dh          81
## 3 infield   1248
## 4 outfield  1136
</code></pre>
<pre><code class="language-r">gf_violin(position ~ average, data = career, fill = 'gray85', draw_quantiles = c(0.1, 0.5, 0.9)) %&gt;%
  gf_labs(x = &quot;Batting Average&quot;,
          y = &quot;&quot;)
</code></pre>
<p><img src="/lectures/11-regression-categorical_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre><code class="language-r">career &lt;- career %&gt;%
  mutate(outfield = ifelse(position == 'outfield', 1, 0),
         infield = ifelse(position == 'infield', 1, 0),
         catcher = ifelse(position == 'catcher', 1, 0))

head(career)
</code></pre>
<pre><code>## # A tibble: 6 × 11
##   playerID  name       lgID  posit…¹     H    AB average leagu…² outfi…³ infield
##   &lt;chr&gt;     &lt;chr&gt;      &lt;fct&gt; &lt;chr&gt;   &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 abbotje01 Jeff Abbo… AL    outfie…   127   459   0.277       0       1       0
## 2 abbotku01 Kurt Abbo… AL    infield    33   123   0.268       0       0       1
## 3 abbotku01 Kurt Abbo… NL    infield   455  1780   0.256       1       0       1
## 4 abercre01 Reggie Ab… NL    outfie…    54   255   0.212       1       1       0
## 5 abernbr01 Brent Abe… AL    infield   194   767   0.253       0       0       1
## 6 abnersh01 Shawn Abn… AL    outfie…    81   309   0.262       0       1       0
## # … with 1 more variable: catcher &lt;dbl&gt;, and abbreviated variable names
## #   ¹​position, ²​league_dummy, ³​outfield
</code></pre>
<pre><code class="language-r">position_lm &lt;- lm(average ~ 1 + outfield + infield + catcher, data = career)

broom::tidy(position_lm)
</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic    p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
## 1 (Intercept)  0.257     0.00315    81.7   0         
## 2 outfield    -0.00182   0.00326    -0.557 0.578     
## 3 infield     -0.00289   0.00325    -0.888 0.375     
## 4 catcher     -0.0165    0.00345    -4.79  0.00000175
</code></pre>
<pre><code class="language-r">df_stats(average ~ position, data = career, mean)
</code></pre>
<pre><code>##   response position      mean
## 1  average  catcher 0.2408859
## 2  average       dh 0.2574041
## 3  average  infield 0.2545163
## 4  average outfield 0.2555881
</code></pre>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/lectures/10-model-comparison/" rel="next">Model Comparisons</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/lectures/12-pairwise/" rel="prev">Pairwise Contrasts</a>
  </div>
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Last updated on Oct 27, 2022</p>

          



          




          


        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    
    
    
    Published with
    <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a>  —
    the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">
    open source</a> website builder that empowers creators.
    
  </p>
</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'event' : "Events",
        'slides' : "Slides"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/js/wowchemy.min.d4185df71ecf716f1c4e7ef5f3d4e2b8.js"></script>

    






</body>
</html>
