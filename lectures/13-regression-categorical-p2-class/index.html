<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  
  
  <meta name="generator" content="Wowchemy 5.0.0-beta.1 for Hugo">
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Regression Categorical Predictors - p2">

  
  <link rel="alternate" hreflang="en-us" href="https://psqf6243.brandonlebeau.org/lectures/13-regression-categorical-p2-class/">

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

  
  
  
  <meta name="theme-color" content="#1565c0">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" media="print" onload="this.media='all'">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js" integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.3aad675291f323c3cd47ae187f0bf0d6.css">

  




  

  


  
  

  

  
  <link rel="manifest" href="/index.webmanifest">
  

  <link rel="icon" type="image/png" href="/images/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="https://psqf6243.brandonlebeau.org/lectures/13-regression-categorical-p2-class/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="PSQF 6243">
  <meta property="og:url" content="https://psqf6243.brandonlebeau.org/lectures/13-regression-categorical-p2-class/">
  <meta property="og:title" content="Regression Categorical Predictors - p2 | PSQF 6243">
  <meta property="og:description" content="Regression Categorical Predictors - p2"><meta property="og:image" content="https://psqf6243.brandonlebeau.org/media/blue-balloon.jpg">
  <meta property="twitter:image" content="https://psqf6243.brandonlebeau.org/media/blue-balloon.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2021-11-08T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2021-11-08T00:00:00&#43;00:00">
  

  



  


  


  





  <title>Regression Categorical Predictors - p2 | PSQF 6243</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper  ">

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7de282f2047be3c570af3a58788341e7.js"></script>

  

<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">PSQF 6243</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">PSQF 6243</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#logistics"><span>Logistics</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/content/"><span>Content</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/lectures/"><span>Lecture Notes</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/assignments/"><span>Assignments</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/code/"><span>Software Resources</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#people"><span>People</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    





<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <button class="form-control sidebar-search js-search">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">Search...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      
      
      


  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
        <li class=""><a href="/lectures/">Lecture Notes</a></li>
    
      


  <li class=""><a href="/lectures/review/">Review</a></li>



  <li class=""><a href="/lectures/review-class/">Review - class</a></li>



  <li class=""><a href="/lectures/intro-regression/">Intro to Linear Regression</a></li>



  <li class=""><a href="/lectures/linear-regression-class/">Intro to Linear Regression - class</a></li>



  <li class=""><a href="/lectures/regression-estimates/">Linear Regression Estimates</a></li>



  <li class=""><a href="/lectures/regression-estimates-class/">Linear Regression Estimates - class</a></li>



  <li class=""><a href="/lectures/least-squares-simulation/">Least Square Simulation</a></li>



  <li class=""><a href="/lectures/regression-inference-p1/">Regression Inference - Part 1</a></li>



  <li class=""><a href="/lectures/05-regression-inference/">Regression Inference - Part 1</a></li>



  <li class=""><a href="/lectures/05a-regression-inference/">Regression Inference - Part 2</a></li>



  <li class=""><a href="/lectures/05a-regression-inference-class/">Regression Inference - Part 2 - Class</a></li>



  <li class=""><a href="/lectures/06-t-vs-norm/">t vs Normal</a></li>



  <li class=""><a href="/lectures/07-regression-assumptions/">Regression Assumptions</a></li>



  <li class=""><a href="/lectures/07a-regression-assumptions/">Regression Assumptions - New Package</a></li>



  <li class=""><a href="/lectures/08-bootstrap/">Regression Bootstrap</a></li>



  <li class=""><a href="/lectures/08-bootstrap-class/">Regression Bootstrap - Class</a></li>



  <li class=""><a href="/lectures/09-multiple-regression-p1/">Multiple Regression - Part 1</a></li>



  <li class=""><a href="/lectures/09-multiple-regression-p1-class/">Multiple Regression - Part 1</a></li>



  <li class=""><a href="/lectures/10-model-comparison/">Model Comparison</a></li>



  <li class=""><a href="/lectures/10-model-comparison-class/">Model Comparison</a></li>



  <li class=""><a href="/lectures/11-multicollinearity/">Multicollinearity</a></li>



  <li class=""><a href="/lectures/11-multicollinearity-class/">Multicollinearity</a></li>



  <li class=""><a href="/lectures/12-regression-categorical/">Regression Categorical Predictors</a></li>



  <li class=""><a href="/lectures/12-regression-categorical-class/">Regression Categorical Predictors</a></li>



  <li class=""><a href="/lectures/13-regression-categorical-p2/">Regression Categorical Predictors - p2</a></li>



  <li class="active"><a href="/lectures/13-regression-categorical-p2-class/">Regression Categorical Predictors - p2</a></li>



  <li class=""><a href="/lectures/14-pairwise/">Pairwise Contrasts</a></li>



  <li class=""><a href="/lectures/14-pairwise-class/">Pairwise Contrasts</a></li>



  <li class=""><a href="/lectures/15-multiple-categorical/">Multiple Categorical Predictors</a></li>

      
    

    
      </ul>
    

  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          

          <h1>Regression Categorical Predictors - p2</h1>

          <div class="article-style">
            
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">

</div>

<div id="regression-with-categorical-predictors---part-2" class="section level1">
<h1>Regression with Categorical Predictors - Part 2</h1>
<p>First, I want to build off of the first part of the notes on regression with categorical predictors. Before generalizing to more than two groups, let’s first explore what happens when values other than 0/1 are used for the categorical attribute. The following three dummy/indicator attributes will be used:</p>
<ol style="list-style-type: decimal">
<li>1 = NL, 0 = AL</li>
<li>1 = NL, 2 = AL</li>
<li>100 = NL, 0 = AL</li>
</ol>
<p>Make some predictions about what you think will happen in the three separate regressions?</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.6     ✓ dplyr   1.0.7
## ✓ tidyr   1.1.4     ✓ stringr 1.4.0
## ✓ readr   2.0.2     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(Lahman)
library(ggformula)</code></pre>
<pre><code>## Loading required package: ggstance</code></pre>
<pre><code>## 
## Attaching package: &#39;ggstance&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:ggplot2&#39;:
## 
##     geom_errorbarh, GeomErrorbarh</code></pre>
<pre><code>## Loading required package: scales</code></pre>
<pre><code>## 
## Attaching package: &#39;scales&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     discard</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     col_factor</code></pre>
<pre><code>## Loading required package: ggridges</code></pre>
<pre><code>## 
## New to ggformula?  Try the tutorials: 
##  learnr::run_tutorial(&quot;introduction&quot;, package = &quot;ggformula&quot;)
##  learnr::run_tutorial(&quot;refining&quot;, package = &quot;ggformula&quot;)</code></pre>
<pre class="r"><code>theme_set(theme_bw(base_size = 18))

career &lt;- Batting %&gt;%
  filter(AB &gt; 100) %&gt;%
  anti_join(Pitching, by = &quot;playerID&quot;) %&gt;%
  filter(yearID &gt; 1990) %&gt;%
  group_by(playerID, lgID) %&gt;%
  summarise(H = sum(H), AB = sum(AB)) %&gt;%
  mutate(average = H / AB)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;playerID&#39;. You can override using the `.groups` argument.</code></pre>
<pre class="r"><code>career &lt;- Master %&gt;%
  tbl_df() %&gt;%
  dplyr::select(playerID, nameFirst, nameLast) %&gt;%
  unite(name, nameFirst, nameLast, sep = &quot; &quot;) %&gt;%
  inner_join(career, by = &quot;playerID&quot;) %&gt;%
  dplyr::select(-playerID)</code></pre>
<pre><code>## Warning: `tbl_df()` was deprecated in dplyr 1.0.0.
## Please use `tibble::as_tibble()` instead.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</code></pre>
<pre class="r"><code>career &lt;- career %&gt;%
  mutate(league_dummy = ifelse(lgID == &#39;NL&#39;, 1, 0),
         league_dummy_12 = ifelse(lgID == &#39;NL&#39;, 1, 2),
         league_dummy_100 = ifelse(lgID == &#39;NL&#39;, 100, 0))

head(career, n = 10)</code></pre>
<pre><code>## # A tibble: 10 × 8
##    name  lgID      H    AB average league_dummy league_dummy_12 league_dummy_100
##    &lt;chr&gt; &lt;fct&gt; &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;        &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;
##  1 Jeff… AL      127   459   0.277            0               2                0
##  2 Kurt… AL       33   123   0.268            0               2                0
##  3 Kurt… NL      455  1780   0.256            1               1              100
##  4 Regg… NL       54   255   0.212            1               1              100
##  5 Bren… AL      194   767   0.253            0               2                0
##  6 Shaw… AL       81   309   0.262            0               2                0
##  7 Shaw… NL       19   115   0.165            1               1              100
##  8 Bobb… AL      858  3061   0.280            0               2                0
##  9 Bobb… NL     1602  5373   0.298            1               1              100
## 10 Jose… AL     1114  3787   0.294            0               2                0</code></pre>
<pre class="r"><code>average_lm &lt;- lm(average ~ league_dummy, data = career)

broom::tidy(average_lm)</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term         estimate std.error statistic p.value
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)  0.254     0.000771   330.      0    
## 2 league_dummy 0.000165  0.00108      0.152   0.879</code></pre>
<p><span class="math display">\[ 
\hat{Average}_{NL} = .2539 + 0.00016 * 1
\]</span></p>
<p><span class="math display">\[
\hat{Average}_{AL} = .2539 + 0.00016 * 0
\]</span></p>
<pre class="r"><code>average_lm_12 &lt;- lm(average ~ league_dummy_12, data = career)

broom::tidy(average_lm_12)</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term             estimate std.error statistic p.value
##   &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)      0.254      0.00171   149.      0    
## 2 league_dummy_12 -0.000165   0.00108    -0.152   0.879</code></pre>
<p><span class="math display">\[
Average = \beta_{0} + \beta_{1} lgID + \epsilon
\]</span></p>
<p><span class="math display">\[ 
\hat{Average}_{NL} = .254 - 0.00016 * 1
\]</span></p>
<p><span class="math display">\[
\hat{Average}_{AL} = .254 - 0.00016 * 2
\]</span></p>
<pre class="r"><code>df_stats(average ~ lgID, data = career, mean)</code></pre>
<pre><code>##   response lgID      mean
## 1  average   AL 0.2539625
## 2  average   NL 0.2541274</code></pre>
<pre class="r"><code>average_lm_100 &lt;- lm(average ~ league_dummy_100, data = career)

broom::tidy(average_lm_100)</code></pre>
<pre><code>## # A tibble: 2 × 5
##   term               estimate std.error statistic p.value
##   &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)      0.254      0.000771    330.      0    
## 2 league_dummy_100 0.00000165 0.0000108     0.152   0.879</code></pre>
<p>Before moving to more than 2 groups, any thoughts on how we could run a one-sample t-test using a linear regression? For example, suppose this null hypothesis wanted to be explored.</p>
<p><span class="math display">\[
H_{0}: \mu_{BA} = .2
\]</span></p>
<p><span class="math display">\[ 
H_{A}: \mu_{BA} \neq .2
\]</span></p>
<pre class="r"><code>t.test(career$average, mu = .2)</code></pre>
<pre><code>## 
##  One Sample t-test
## 
## data:  career$average
## t = 99.706, df = 2801, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0.2
## 95 percent confidence interval:
##  0.2529829 0.2551086
## sample estimates:
## mean of x 
## 0.2540458</code></pre>
<pre class="r"><code>summary(lm(average ~ 1, data = career))</code></pre>
<pre><code>## 
## Call:
## lm(formula = average ~ 1, data = career)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.129046 -0.016758  0.002863  0.019749  0.094791 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.2540458  0.0005421   468.7   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.02869 on 2801 degrees of freedom</code></pre>
<pre class="r"><code>summary(lm(I(average - .2) ~ 1, data = career))</code></pre>
<pre><code>## 
## Call:
## lm(formula = I(average - 0.2) ~ 1, data = career)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.129046 -0.016758  0.002863  0.019749  0.094791 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.0540458  0.0005421   99.71   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.02869 on 2801 degrees of freedom</code></pre>
<p><span class="math display">\[
t = \frac{\bar{X} - \mu}{\frac{\sigma}{\sqrt{n}}}
\]</span></p>
<div id="generalize-to-more-than-2-groups" class="section level2">
<h2>Generalize to more than 2 groups</h2>
<p>The ability to use regression with categorical attributes of more than 2 groups is possible and an extension of the 2 groups model shown above. First, let’s think about how we could represent three categories as numeric attributes. Suppose we had the following 4 categories of baseball players.</p>
<table>
<thead>
<tr class="header">
<th align="left">Position</th>
<th align="right">number position</th>
<th align="right">dummy infield</th>
<th align="right">dummy catcher</th>
<th align="right">dummy dh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Outfield</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Infield</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Catcher</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Designated Hitter</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[
H_{0}: \mu_{out} = \mu_{in} = \mu_{catcher} = \mu_{dh}
\]</span></p>
<p><span class="math display">\[
H_{A}: At\ least\ one\ differs
\]</span></p>
<pre class="r"><code>library(GeomMLBStadiums)

ggplot() + 
  geom_mlb_stadium(stadium_segments = &quot;all&quot;) + 
  facet_wrap(~team) + 
  coord_fixed() + 
  theme_void()</code></pre>
<p><img src="/lectures/13-regression-categorical-p2-class_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>library(tidyverse)
library(Lahman)
library(ggformula)

theme_set(theme_bw(base_size = 18))

career &lt;- Batting %&gt;%
  filter(AB &gt; 100) %&gt;%
  anti_join(Pitching, by = &quot;playerID&quot;) %&gt;%
  filter(yearID &gt; 1990) %&gt;%
  group_by(playerID, lgID) %&gt;%
  summarise(H = sum(H), AB = sum(AB)) %&gt;%
  mutate(average = H / AB)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;playerID&#39;. You can override using the `.groups` argument.</code></pre>
<pre class="r"><code>career &lt;- Appearances %&gt;%
  filter(yearID &gt; 1990) %&gt;%
  select(-GS, -G_ph, -G_pr, -G_batting, -G_defense, -G_p, -G_lf, -G_cf, -G_rf) %&gt;%
  rowwise() %&gt;%
  mutate(g_inf = sum(c_across(G_1b:G_ss))) %&gt;%
  select(-G_1b, -G_2b, -G_3b, -G_ss) %&gt;%
  group_by(playerID, lgID) %&gt;%
  summarise(catcher = sum(G_c),
            outfield = sum(G_of),
            dh = sum(G_dh),
            infield = sum(g_inf),
            total_games = sum(G_all)) %&gt;%
  pivot_longer(catcher:infield,
               names_to = &quot;position&quot;) %&gt;%
  filter(value &gt; 0) %&gt;%
  group_by(playerID, lgID) %&gt;%
  slice_max(value) %&gt;%
  select(playerID, lgID, position) %&gt;%
  inner_join(career)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;playerID&#39;. You can override using the `.groups` argument.</code></pre>
<pre><code>## Joining, by = c(&quot;playerID&quot;, &quot;lgID&quot;)</code></pre>
<pre class="r"><code>career &lt;- Master %&gt;%
  tbl_df() %&gt;%
  dplyr::select(playerID, nameFirst, nameLast) %&gt;%
  unite(name, nameFirst, nameLast, sep = &quot; &quot;) %&gt;%
  inner_join(career, by = &quot;playerID&quot;)

career &lt;- career %&gt;%
  mutate(league_dummy = ifelse(lgID == &#39;NL&#39;, 1, 0))

count(career, position)</code></pre>
<pre><code>## # A tibble: 4 × 2
##   position     n
##   &lt;chr&gt;    &lt;int&gt;
## 1 catcher    397
## 2 dh          79
## 3 infield   1233
## 4 outfield  1096</code></pre>
<pre class="r"><code>gf_violin(position ~ average, data = career, fill = &#39;gray85&#39;, draw_quantiles = c(0.1, 0.5, 0.9)) %&gt;%
  gf_labs(x = &quot;Batting Average&quot;,
          y = &quot;&quot;)</code></pre>
<p><img src="/lectures/13-regression-categorical-p2-class_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<pre class="r"><code>career &lt;- career %&gt;%
  mutate(dh = ifelse(position == &#39;dh&#39;, 1, 0),
         infield = ifelse(position == &#39;infield&#39;, 1, 0),
         catcher = ifelse(position == &#39;catcher&#39;, 1, 0))

head(career)</code></pre>
<pre><code>## # A tibble: 6 × 11
##   playerID  name   lgID  position     H    AB average league_dummy    dh infield
##   &lt;chr&gt;     &lt;chr&gt;  &lt;fct&gt; &lt;chr&gt;    &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 abbotje01 Jeff … AL    outfield   127   459   0.277            0     0       0
## 2 abbotku01 Kurt … AL    infield     33   123   0.268            0     0       1
## 3 abbotku01 Kurt … NL    infield    455  1780   0.256            1     0       1
## 4 abercre01 Reggi… NL    outfield    54   255   0.212            1     0       0
## 5 abernbr01 Brent… AL    infield    194   767   0.253            0     0       1
## 6 abnersh01 Shawn… AL    outfield    81   309   0.262            0     0       0
## # … with 1 more variable: catcher &lt;dbl&gt;</code></pre>
<p><span class="math display">\[
average = \beta_{0} + \beta_{1} dh + \beta_{2} infield + \beta_{3} catcher + \epsilon
\]</span></p>
<pre class="r"><code>position_lm &lt;- lm(average ~ 1 + dh + infield + catcher, data = career)

broom::tidy(position_lm)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)  0.257    0.000855   300.    0       
## 2 dh           0.00153  0.00330      0.464 6.42e- 1
## 3 infield     -0.00136  0.00117     -1.16  2.46e- 1
## 4 catcher     -0.0146   0.00166     -8.79  2.47e-18</code></pre>
<pre class="r"><code>df_stats(average ~ position, data = career, mean)</code></pre>
<pre><code>##   response position      mean
## 1  average  catcher 0.2420592
## 2  average       dh 0.2581647
## 3  average  infield 0.2552719
## 4  average outfield 0.2566338</code></pre>
<pre class="r"><code>summary(position_lm)</code></pre>
<pre><code>## 
## Call:
## lm(formula = average ~ 1 + dh + infield + catcher, data = career)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.117059 -0.016592  0.002463  0.019449  0.093565 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.2566338  0.0008546 300.281   &lt;2e-16 ***
## dh           0.0015309  0.0032960   0.464    0.642    
## infield     -0.0013619  0.0011746  -1.159    0.246    
## catcher     -0.0145747  0.0016574  -8.794   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.02829 on 2801 degrees of freedom
## Multiple R-squared:  0.02925,    Adjusted R-squared:  0.02821 
## F-statistic: 28.14 on 3 and 2801 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>pairwise.t.test(career$average, career$position)</code></pre>
<pre><code>## 
##  Pairwise comparisons using t tests with pooled SD 
## 
## data:  career$average and career$position 
## 
##          catcher dh   infield
## dh       1.6e-05 -    -      
## infield  4.3e-15 0.76 -      
## outfield &lt; 2e-16 0.76 0.74   
## 
## P value adjustment method: holm</code></pre>
<pre class="r"><code>pairwise.t.test(career$average, career$position, p.adjust = &#39;none&#39;)</code></pre>
<pre><code>## 
##  Pairwise comparisons using t tests with pooled SD 
## 
## data:  career$average and career$position 
## 
##          catcher dh   infield
## dh       4.0e-06 -    -      
## infield  8.6e-16 0.38 -      
## outfield &lt; 2e-16 0.64 0.25   
## 
## P value adjustment method: none</code></pre>
<pre class="r"><code>.05 * 6</code></pre>
<pre><code>## [1] 0.3</code></pre>
<pre class="r"><code>pairwise.t.test(career$average, career$position, p.adjust = &#39;bonf&#39;)</code></pre>
<pre><code>## 
##  Pairwise comparisons using t tests with pooled SD 
## 
## data:  career$average and career$position 
## 
##          catcher dh infield
## dh       2.4e-05 -  -      
## infield  5.2e-15 1  -      
## outfield &lt; 2e-16 1  1      
## 
## P value adjustment method: bonferroni</code></pre>
<p><span class="math display">\[
\alpha_{adj} = \frac{\alpha}{number\ of\ tests}
\]</span></p>
<p><span class="math display">\[
p_{adj} = p_{orig} * number\ of\ tests
\]</span></p>
<pre class="r"><code>.05 / 6</code></pre>
<pre><code>## [1] 0.008333333</code></pre>
<pre class="r"><code>pos_lm &lt;- lm(average ~ position, data = career)
summary(pos_lm)</code></pre>
<pre><code>## 
## Call:
## lm(formula = average ~ position, data = career)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.117059 -0.016592  0.002463  0.019449  0.093565 
## 
## Coefficients:
##                  Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)      0.242059   0.001420 170.461  &lt; 2e-16 ***
## positiondh       0.016106   0.003486   4.621 4.00e-06 ***
## positioninfield  0.013213   0.001633   8.093 8.62e-16 ***
## positionoutfield 0.014575   0.001657   8.794  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.02829 on 2801 degrees of freedom
## Multiple R-squared:  0.02925,    Adjusted R-squared:  0.02821 
## F-statistic: 28.14 on 3 and 2801 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>career &lt;- career %&gt;% 
mutate(position_ord = ifelse(position == &#39;outfield&#39;, 0, 
                             ifelse(position == &#39;dh&#39;, 1, 
                                    ifelse(position == &#39;infield&#39;, 2, 3))))

pos_ord &lt;- lm(average ~ position_ord, data = career)
summary(pos_ord)</code></pre>
<pre><code>## 
## Call:
## lm(formula = average ~ position_ord, data = career)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.124016 -0.017111  0.002676  0.018996  0.096824 
## 
## Coefficients:
##                Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   0.2580075  0.0008302 310.794  &lt; 2e-16 ***
## position_ord -0.0029972  0.0004745  -6.316 3.11e-10 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.0285 on 2803 degrees of freedom
## Multiple R-squared:  0.01403,    Adjusted R-squared:  0.01368 
## F-statistic: 39.89 on 1 and 2803 DF,  p-value: 3.114e-10</code></pre>
<pre class="r"><code>gf_point(average ~ position_ord, data = career) %&gt;%
gf_smooth(method = &#39;lm&#39;)</code></pre>
<p><img src="/lectures/13-regression-categorical-p2-class_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
</div>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/lectures/13-regression-categorical-p2/" rel="next">Regression Categorical Predictors - p2</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/lectures/14-pairwise/" rel="prev">Pairwise Contrasts</a>
  </div>
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Last updated on Nov 8, 2021</p>

          



          




          


        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    
    
    
    Published with
    <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a>  —
    the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">
    open source</a> website builder that empowers creators.
    
  </p>
</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'event' : "Events",
        'slides' : "Slides"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/js/wowchemy.min.d4185df71ecf716f1c4e7ef5f3d4e2b8.js"></script>

    






</body>
</html>
