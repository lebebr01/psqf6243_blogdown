<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  
  
  <meta name="generator" content="Wowchemy 5.0.0-beta.1 for Hugo">
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Introduction to Linear Regression This week will dive into linear regression, the foundation of this course. The exploration into linear regression will first start with the case when we have 2 continuous attributes.">

  
  <link rel="alternate" hreflang="en-us" href="https://psqf6243.brandonlebeau.org/lectures/02-linear-regression-class/">

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

  
  
  
  <meta name="theme-color" content="#1565c0">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" media="print" onload="this.media='all'">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js" integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.3aad675291f323c3cd47ae187f0bf0d6.css">

  




  

  


  
  

  

  
  <link rel="manifest" href="/index.webmanifest">
  

  <link rel="icon" type="image/png" href="/images/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="https://psqf6243.brandonlebeau.org/lectures/02-linear-regression-class/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="PSQF 6243">
  <meta property="og:url" content="https://psqf6243.brandonlebeau.org/lectures/02-linear-regression-class/">
  <meta property="og:title" content="Introduction to Linear Regression - Class Notes | PSQF 6243">
  <meta property="og:description" content="Introduction to Linear Regression This week will dive into linear regression, the foundation of this course. The exploration into linear regression will first start with the case when we have 2 continuous attributes."><meta property="og:image" content="https://psqf6243.brandonlebeau.org/media/blue-balloon.jpg">
  <meta property="twitter:image" content="https://psqf6243.brandonlebeau.org/media/blue-balloon.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2022-08-24T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2022-08-24T00:00:00&#43;00:00">
  

  



  


  


  





  <title>Introduction to Linear Regression - Class Notes | PSQF 6243</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper  ">

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7de282f2047be3c570af3a58788341e7.js"></script>

  

<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">PSQF 6243</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">PSQF 6243</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#logistics"><span>Logistics</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/content/"><span>Content</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/lectures/"><span>Lecture Notes</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/assignments/"><span>Assignments</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/code/"><span>Software Resources</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#people"><span>People</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    





<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <button class="form-control sidebar-search js-search">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">Search...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      
      
      


  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
        <li class=""><a href="/lectures/">Lecture Notes</a></li>
    
      


  <li class=""><a href="/lectures/01-review/">Review</a></li>



  <li class=""><a href="/lectures/01-review-class/">Review - Class</a></li>



  <li class=""><a href="/lectures/02-linear-regression/">Introduction to Linear Regression</a></li>



  <li class="active"><a href="/lectures/02-linear-regression-class/">Introduction to Linear Regression - Class Notes</a></li>



  <li class=""><a href="/lectures/03-regression-estimates/">Regression Estimates</a></li>



  <li class=""><a href="/lectures/04-least-squares-simulation/">Least Squares Simulation</a></li>



  <li class=""><a href="/lectures/05-regression-inference/">Regression Inference</a></li>

      
    

    
      </ul>
    

  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction-to-linear-regression">Introduction to Linear Regression</a>
      <ul>
        <li><a href="#specific-example">Specific example</a></li>
        <li><a href="#guiding-question">Guiding Question</a>
          <ul>
            <li><a href="#questions-to-consider">Questions to consider</a></li>
          </ul>
        </li>
        <li><a href="#adding-a-smoother-line">Adding a smoother line</a></li>
        <li><a href="#estimating-linear-regression-coefficients">Estimating linear regression coefficients</a></li>
        <li><a href="#interpretting-linear-regression-terms">Interpretting linear regression terms</a></li>
        <li><a href="#what-about-the-error">What about the error?</a>
          <ul>
            <li><a href="#estimating-error-in-linear-regression">Estimating error in linear regression</a></li>
          </ul>
        </li>
        <li><a href="#another-related-measure-of-error">Another related measure of error</a></li>
      </ul>
    </li>
  </ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          

          <h1>Introduction to Linear Regression - Class Notes</h1>

          <div class="article-style">
            <h1 id="introduction-to-linear-regression">Introduction to Linear Regression</h1>
<p>This week will dive into linear regression, the foundation of this course. The exploration into linear regression will first start with the case when we have 2 <strong>continuous</strong> attributes. One of those attributes will be the <em>outcome</em> or <em>attribute of interest</em> whereas the other will used as a <em>predictor</em>. The outcome or attribute of interest is sometimes referred to as the dependent variable and the predictor is sometimes referred to as the independent variable. One way to think about this is that the dependent variable depends or is a function of the other attributes of interest. In linear regression terms, it could also be said that the independent variable <strong>explains variation</strong> in the dependent variable (more on this later).</p>
<p>Of note, variable is a typical word used in statistics, I&rsquo;ve come to like the word <strong>attribute</strong> instead of variable. I will tend to use attribute, as in, a data attribute, but these are roughly interchangeable in my terminology.</p>
<p>We may write this general model as:</p>
<p>$$
Y = \beta_{0} + \beta_{1} X + \epsilon
$$</p>
<p>Where <code>\(Y\)</code> is the outcome attribute. It is also known as the dependent variable. The <code>\(X\)</code> term is the predictor/covariate attribute. It is also known as the independent variable. The <code>\(\epsilon\)</code> is a random error term, more on this later. Finally, <code>\(\beta_{0}\)</code> and <code>\(\beta_{1}\)</code> are unknown population coefficients that we are interested in estimating. More on this later too.</p>
<h2 id="specific-example">Specific example</h2>
<p>The data used for this section of the course is from the 2019 WNBA season. These data are part of the <a href="https://www.bayesrulesbook.com/" target="_blank" rel="noopener"><em>bayesrules</em> package/book</a>. The data contain 146 rows, one for each WNBA player sampled, and 32 attributes for that player. The R packages are loaded and the first few rows of the data are shown below.</p>
<pre><code class="language-r">library(tidyverse)
</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.1      ✔ stringr 1.4.1 
## ✔ readr   2.1.2      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
</code></pre>
<pre><code class="language-r">library(mosaic)
</code></pre>
<pre><code>## Registered S3 method overwritten by 'mosaic':
##   method                           from   
##   fortify.SpatialPolygonsDataFrame ggplot2
## 
## The 'mosaic' package masks several functions from core packages in order to add 
## additional features.  The original behavior of these functions should not be affected by this.
## 
## Attaching package: 'mosaic'
## 
## The following object is masked from 'package:Matrix':
## 
##     mean
## 
## The following objects are masked from 'package:dplyr':
## 
##     count, do, tally
## 
## The following object is masked from 'package:purrr':
## 
##     cross
## 
## The following object is masked from 'package:ggplot2':
## 
##     stat
## 
## The following objects are masked from 'package:stats':
## 
##     binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,
##     quantile, sd, t.test, var
## 
## The following objects are masked from 'package:base':
## 
##     max, mean, min, prod, range, sample, sum
</code></pre>
<pre><code class="language-r">library(ggformula)

basketball &lt;- readr::read_csv(&quot;https://raw.githubusercontent.com/lebebr01/psqf_6243/main/data/basketball.csv&quot;)
</code></pre>
<pre><code>## Rows: 146 Columns: 32
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (2): player_name, team
## dbl (29): height, weight, year, age, games_played, games_started, avg_minute...
## lgl  (1): starter
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
</code></pre>
<pre><code class="language-r">theme_set(theme_bw(base_size = 18))
</code></pre>
<pre><code class="language-r">head(basketball)
</code></pre>
<pre><code>## # A tibble: 6 × 32
##   player_name    height weight  year team    age games…¹ games…² avg_m…³ avg_f…⁴
##   &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Natalie Achon…     75    190  2019 IND      26      30      18    21.2     3.3
## 2 Kayla Alexand…     76    195  2019 CHI      28       3       0     6.7     1  
## 3 Rebecca Allen      74    162  2019 NYL      26      24       2    17.2     2.7
## 4 Jillian Alley…     74    193  2019 MIN      24       5       0     2.8     0.4
## 5 Kristine Anig…     76    200  2019 TOT      22      27       0     9.3     0.8
## 6 Kristine Anig…     76    200  2019 CON      22      17       0     7.1     0.6
## # … with 22 more variables: avg_field_goal_attempts &lt;dbl&gt;,
## #   field_goal_pct &lt;dbl&gt;, avg_three_pointers &lt;dbl&gt;,
## #   avg_three_pointer_attempts &lt;dbl&gt;, three_pointer_pct &lt;dbl&gt;,
## #   avg_two_pointers &lt;dbl&gt;, avg_two_pointer_attempts &lt;dbl&gt;,
## #   two_pointer_pct &lt;dbl&gt;, avg_free_throws &lt;dbl&gt;,
## #   avg_free_throw_attempts &lt;dbl&gt;, free_throw_pct &lt;dbl&gt;,
## #   avg_offensive_rb &lt;dbl&gt;, avg_defensive_rb &lt;dbl&gt;, avg_rb &lt;dbl&gt;, …
</code></pre>
<h2 id="guiding-question">Guiding Question</h2>
<p>Suppose we are interested in exploring if players tend to score more points by playing more minutes in the season. That is, those that play more may have more opportunities to score more points. More generally, the relationship between average points in each game by the total minutes played across the season.</p>
<p>One first step in an analysis would be to explore each distribution independently first. I&rsquo;m going to leave that as an exercise for you to do on your own.</p>
<p>The next step would be to explore the bivariate figure of these two attributes. As both of these attributes are continuous ratio type attributes, a scatterplot would be one way to visualize this. A scatterplot takes each X,Y pair of data and plots those coordinates. This can be done in R with the following code.</p>
<pre><code class="language-r">gf_point(avg_points ~ total_minutes, data = basketball, size = 4, alpha = .5) %&gt;% 
  gf_labs(x = &quot;Total Minutes Played&quot;,
          y = &quot;Average Points Scored&quot;) 
</code></pre>
<p><img src="/lectures/02-linear-regression-class_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre><code class="language-r">gf_point(avg_points ~ total_minutes, data = basketball, size = 4, alpha = .5) |&gt;
  gf_smooth(method = 'lm', size = 4) |&gt;
  gf_smooth(linetype = 2, color = 'black', size = 4) |&gt;
  gf_labs(x = &quot;Total Minutes Played&quot;,
          y = &quot;Average Points Scored&quot;) 
</code></pre>
<pre><code>## `geom_smooth()` using method = 'loess'
</code></pre>
<p><img src="/lectures/02-linear-regression-class_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre><code class="language-r">filter(basketball, avg_points &gt; 15)
</code></pre>
<pre><code>## # A tibble: 1 × 32
##   player_name    height weight  year team    age games…¹ games…² avg_m…³ avg_f…⁴
##   &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Arike Ogunbow…     68    165  2019 DAL      22      33      28    32.1     6.5
## # … with 22 more variables: avg_field_goal_attempts &lt;dbl&gt;,
## #   field_goal_pct &lt;dbl&gt;, avg_three_pointers &lt;dbl&gt;,
## #   avg_three_pointer_attempts &lt;dbl&gt;, three_pointer_pct &lt;dbl&gt;,
## #   avg_two_pointers &lt;dbl&gt;, avg_two_pointer_attempts &lt;dbl&gt;,
## #   two_pointer_pct &lt;dbl&gt;, avg_free_throws &lt;dbl&gt;,
## #   avg_free_throw_attempts &lt;dbl&gt;, free_throw_pct &lt;dbl&gt;,
## #   avg_offensive_rb &lt;dbl&gt;, avg_defensive_rb &lt;dbl&gt;, avg_rb &lt;dbl&gt;, …
</code></pre>
<h3 id="questions-to-consider">Questions to consider</h3>
<ol>
<li>What can be noticed about the relationship between these two attributes?</li>
<li>Does there appear to be a relationship between the two?</li>
<li>Is this relationship perfect?</li>
</ol>
<h2 id="adding-a-smoother-line">Adding a smoother line</h2>
<p>Adding a smoother line to the figure can help to guide how strong the relationship may be. In general, there are two types of smoothers that we will consider in this course. One is flexible and data dependent. This means that the functional form of the relationship is flexible to allow the data to specify if there are in non-linear aspects. The second is a linear or straight-line approach.</p>
<p>I&rsquo;m going to add both to the figure below. The flexible (in this case this is a LOESS curve) curve is darker blue, the linear line is lighter blue.</p>
<p>Does there appear to be much difference in the relationship across the two lines?</p>
<pre><code class="language-r">gf_point(avg_points ~ total_minutes, data = basketball, size = 4, alpha = .5) %&gt;% 
  #gf_smooth() %&gt;%
  gf_smooth(method = 'lm',  color = 'lightblue', size = 4) %&gt;%
  gf_labs(x = &quot;Total Minutes Played&quot;,
          y = &quot;Average Points Scored&quot;)
</code></pre>
<p><img src="/lectures/02-linear-regression-class_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre><code class="language-r">cor(avg_points ~ total_minutes, data = basketball)
</code></pre>
<pre><code>## [1] 0.8476624
</code></pre>
<pre><code class="language-r">gf_point(avg_points ~ total_minutes, data = basketball, size = 4, alpha = .5) %&gt;% 
  gf_smooth(color = 'black', size = 3) %&gt;%
  gf_smooth(method = 'lm', linetype = 2, size = 4, color = 'blue')
  gf_labs(x = &quot;Total Minutes Played&quot;,
          y = &quot;Average Points Scored&quot;)
</code></pre>
<pre><code class="language-r">library(simglm)

sim_args &lt;- list(
    formula = y ~ 1 + poly(x1, degree = 2),
    fixed = list(x1 = list(var_type = 'continuous')),
    sample_size = 2000,
    reg_weights = c(1, 2, -200)
)

poly_data &lt;- simulate_fixed(data = NULL, sim_args) |&gt;
simulate_error(sim_args) |&gt;
generate_response(sim_args)

head(poly_data)
</code></pre>
<pre><code>##   X.Intercept.         x1_1        x1_2          x1 level1_id      error
## 1            1  0.001295508 -0.01539659  0.04920376         1  1.1871258
## 2            1  0.010810915 -0.01157812  0.47539171         2 -0.8550062
## 3            1  0.054146662  0.07673398  2.41636753         3 -0.7552604
## 4            1 -0.003255235 -0.01524062 -0.15462063         4  1.6580407
## 5            1 -0.012048218 -0.01130604 -0.54845179         5 -0.4716792
## 6            1 -0.002683894 -0.01533060 -0.12903070         6  1.4749041
##   fixed_outcome random_effects          y
## 1      4.081908              0   5.269034
## 2      3.337245              0   2.482239
## 3    -14.238503              0 -14.993764
## 4      4.041613              0   5.699654
## 5      3.237111              0   2.765432
## 6      4.060753              0   5.535657
</code></pre>
<pre><code class="language-r">gf_point(y ~ x1, data = poly_data, size = 3) |&gt;
  gf_smooth(method = 'lm', color = 'lightblue') |&gt;
  gf_smooth(method = 'loess')
</code></pre>
<p><img src="/lectures/02-linear-regression-class_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<h2 id="estimating-linear-regression-coefficients">Estimating linear regression coefficients</h2>
<p>The linear regression coefficients can be estimated within any statistical software (or by hand, even if tedious). Within R, the primary function is <code>lm()</code> to estimate a linear regression. The primary argument is a formula similar to the regression formula shown above at the top of the notes.</p>
<p>This equation could be written more directly for our specific problem.</p>
<p>$$
Avg_points = \beta_{0} + \beta_{1} Minutes_Played + \epsilon
$$</p>
<p>$$
Avg_points = 1.14 + .01 Minutes_Played + \epsilon
$$</p>
<p>One way to read this equation is that the number of minutes played for each player helps to understand variation or differences in the average points scored for that player. Or, average points is modeled or explained by minutes played.</p>
<p>For the R formula, instead of an $ = $, you could insert a ~.</p>
<pre><code class="language-r">wnba_reg &lt;- lm(avg_points ~ total_minutes, data = basketball)
coef(wnba_reg)
</code></pre>
<pre><code>##   (Intercept) total_minutes 
##    1.13562456    0.01014207
</code></pre>
<pre><code class="language-r">basketball &lt;- basketball |&gt;
  mutate(minutes_100 = total_minutes / 100)
</code></pre>
<pre><code class="language-r">gf_point(avg_points ~ minutes_100, data = basketball, size = 4, alpha = .5) %&gt;% 
  #gf_smooth() %&gt;%
  gf_smooth(method = 'lm',  color = 'lightblue', size = 4) %&gt;%
  gf_labs(x = &quot;Total Minutes Played&quot;,
          y = &quot;Average Points Scored&quot;)
</code></pre>
<p><img src="/lectures/02-linear-regression-class_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre><code class="language-r">wnba_reg &lt;- lm(avg_points ~ minutes_100, data = basketball)
coef(wnba_reg)
</code></pre>
<pre><code>## (Intercept) minutes_100 
##    1.135625    1.014207
</code></pre>
<h2 id="interpretting-linear-regression-terms">Interpretting linear regression terms</h2>
<p>Now that we have estimates for the linear regression terms, how are these interpretted? The linear regression equation with these estimates plugged in would look like the following:</p>
<p>$$
\hat{avg_points} = 1.1356 + .0101 min_played
$$</p>
<p>Where instead of <code>\(\beta_{0}\)</code> or <code>\(\beta_{1}\)</code>, the estimated values from this single season were inserted. Note the <code>\(\hat{avg\_points}\)</code>, which the caret symbol is read as a hat, that is, average points hat, is a very important small distinction. This now represents the predicted values for the linear regression. That means, that the predicted value for the average number of points is assumed to function solely based on the minutes a player played. We could put in any value for the minutes played and get an estimated average number of points out.</p>
<pre><code class="language-r">1.1356 + .0101 * 0
</code></pre>
<pre><code>## [1] 1.1356
</code></pre>
<pre><code class="language-r">1.1356 + .0101 * 1
</code></pre>
<pre><code>## [1] 1.1457
</code></pre>
<pre><code class="language-r">1.1356 + .0101 * 100
</code></pre>
<pre><code>## [1] 2.1456
</code></pre>
<pre><code class="language-r">1.1356 + .0101 * mean(basketball$avg_points)
</code></pre>
<pre><code>## [1] 1.189732
</code></pre>
<pre><code class="language-r">1.1356 + .0101 * 5000
</code></pre>
<pre><code>## [1] 51.6356
</code></pre>
<pre><code class="language-r">1.1356 + .0101 * -50
</code></pre>
<pre><code>## [1] 0.6306
</code></pre>
<p>Also notice from the equation above with the estimated coefficients, there is no longer any error. More on this later, but I wanted to point that out now. Back to model interpretations, these can become a bit more obvious with the values computed above by inputting specific values for the total minutes played.</p>
<p>First, for the intercept ($\beta_{0}$), notice that for the first computation above when 0 total minutes was input into the equation, that the same value for the intercept estimate was returned. This highlights what the intercept is, the average number of points scored when the X attribute (minutes played) equals 0.</p>
<p>The slope, ($\beta_{1}$), term is the average change in the outcome (average points here) for a one unit change in the predictor attribute (minutes played). Therefore, the slope here is 0.0101, which means that the average points scores increases by about 0.01 points for every additional minute played. This effect is additive, meaning that the 0.01 for a one unit change, say from 100 to 101 minutes, will remain when increasing from 101 to 102 minutes.</p>
<p>The predictions coming from the linear regression are the same as the light blue dashed line shown in the figure above and recreated here without the dark blue line.</p>
<pre><code class="language-r">gf_point(avg_points ~ total_minutes, data = basketball, size = 4, alpha = .5) %&gt;% 
  gf_smooth(method = 'lm', linetype = 2, color = 'lightblue') %&gt;%
  gf_labs(x = &quot;Total Minutes Played&quot;,
          y = &quot;Average Points Scored&quot;)
</code></pre>
<p><img src="/lectures/02-linear-regression-class_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<h2 id="what-about-the-error">What about the error?</h2>
<p>So far the error has been disregarded, but where did it go? The error didn&rsquo;t disappear, it is actually in the figure just created above. Where can you see the error? Why was it disregarded when creating the predicted values?</p>
<p>The short answer is that the error in a linear regression is commonly assumed to follow a Normal distribution with a mean of 0 and some variance, <code>\(\sigma^2\)</code>. Sometimes this is written in math notation as:</p>
<p>$$
\epsilon \sim N(0, \sigma^2)
$$</p>
<p>From this notation, can you see why the error was disregarded earlier when generating predictions?</p>
<p>In short, on average, the error is assumed to be 0 across all the sample data. The error will be smaller when the data are more closely clustered around the linear regression line and larger when the data are not clustered around the linear regression line. In the simple case with a single predictor, the error would be minimized when the correlation is closest to 1 in absolute value and largest when the correlation close to or equals 0.</p>
<h3 id="estimating-error-in-linear-regression">Estimating error in linear regression</h3>
<p>This comes from partitioning of variance that you maybe heard from a design of experiment or analysis of variance course. More specifically, the variance in the outcome can be partioned or split into two components, those that the independent attribute helped to explain vs those that it can not explain. The part that can be explained is sometimes referred to as the <em>sum of squares regression</em> (SSR), the portion that is unexplained is referred to as the <em>sum of squares error</em> (SSE). This could be written in math notation as:</p>
<p>$$
\sum (Y - \bar{Y})^2 = \sum (Y - \hat{Y})^2 + \sum (\hat{Y} - \bar{Y})^2
$$</p>
<p>Let&rsquo;s try to visualize what this means.</p>
<pre><code class="language-r">gf_point(avg_points ~ total_minutes, data = basketball, size = 4, alpha = .5) %&gt;% 
  gf_hline(yintercept = ~mean(avg_points), data = basketball) %&gt;%
  gf_smooth(method = 'lm', linetype = 2, color = 'lightblue') %&gt;%
  gf_segment(avg_points + mean(avg_points) ~ total_minutes + total_minutes, data = basketball, color = '#FF7F7F') %&gt;%
  gf_labs(x = &quot;Total Minutes Played&quot;,
          y = &quot;Average Points Scored&quot;)
</code></pre>
<p><img src="/lectures/02-linear-regression-class_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<pre><code class="language-r">gf_point(avg_points ~ total_minutes, data = basketball, size = 4, alpha = .5) %&gt;% 
  gf_hline(yintercept = ~mean(avg_points), data = basketball) %&gt;%
  gf_smooth(method = 'lm', linetype = 2, color = 'lightblue') %&gt;%
  gf_segment(avg_points + fitted(wnba_reg) ~ total_minutes + total_minutes, data = basketball, color = '#65a765') %&gt;%
  gf_labs(x = &quot;Total Minutes Played&quot;,
          y = &quot;Average Points Scored&quot;)
</code></pre>
<p><img src="/lectures/02-linear-regression-class_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre><code class="language-r">gf_point(avg_points ~ total_minutes, data = basketball, size = 4, alpha = .5) %&gt;% 
  gf_hline(yintercept = ~mean(avg_points), data = basketball) %&gt;%
  gf_smooth(method = 'lm', linetype = 2, color = 'lightblue') %&gt;%
  gf_segment(mean(avg_points) + fitted(wnba_reg) ~ total_minutes + total_minutes, data = basketball, color = '#FFD580') %&gt;%
  gf_labs(x = &quot;Total Minutes Played&quot;,
          y = &quot;Average Points Scored&quot;)
</code></pre>
<p><img src="/lectures/02-linear-regression-class_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<h2 id="another-related-measure-of-error">Another related measure of error</h2>
<p>Another way to get a measure of how well the model is performing, would be a statistic called R-squared. This statistic is a function of the sum of squares described above.</p>
<p>$$
R^{2} = 1 - \frac{SS_{res}}{SS_{total}}
$$</p>
<p>or</p>
<p>$$
R^{2} = \frac{SS_{reg}}{SS_{total}}
$$</p>
<p>Let&rsquo;s compute the sum of square and get a value for <code>\(R^2\)</code>.</p>
<pre><code class="language-r">basketball %&gt;%
summarise(ss_total = sum((avg_points - mean(avg_points))^2),
          ss_error = sum((avg_points - fitted(wnba_reg))^2),
          ss_reg = sum((fitted(wnba_reg) - mean(avg_points))^2)) %&gt;%
mutate(r_square = 1 - ss_error / ss_total,
       r_square2 = ss_reg / ss_total)
</code></pre>
<pre><code>## # A tibble: 1 × 5
##   ss_total ss_error ss_reg r_square r_square2
##      &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1    2004.     564.  1440.    0.719     0.719
</code></pre>
<pre><code class="language-r">summary(wnba_reg)$r.square
</code></pre>
<pre><code>## [1] 0.7185315
</code></pre>
<pre><code class="language-r">summary(wnba_reg)$sigma
</code></pre>
<pre><code>## [1] 1.979045
</code></pre>
<pre><code class="language-r">sigma_hat_square &lt;- 563.9929 / (nrow(basketball) - 2)
sigma_hat &lt;- sqrt(sigma_hat_square)

sigma_hat_square
</code></pre>
<pre><code>## [1] 3.916617
</code></pre>
<pre><code class="language-r">sigma_hat
</code></pre>
<pre><code>## [1] 1.979045
</code></pre>
<p>$$
\sigma^2 = \frac{SS_{error}}{n - 2}
$$</p>
<p>$$
\sigma = \sqrt{\sigma^2}
$$</p>
<p>$$
\hat{\sigma}
$$</p>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/lectures/02-linear-regression/" rel="next">Introduction to Linear Regression</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/lectures/03-regression-estimates/" rel="prev">Regression Estimates</a>
  </div>
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Last updated on Aug 24, 2022</p>

          



          




          


        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    
    
    
    Published with
    <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a>  —
    the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">
    open source</a> website builder that empowers creators.
    
  </p>
</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'event' : "Events",
        'slides' : "Slides"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/js/wowchemy.min.d4185df71ecf716f1c4e7ef5f3d4e2b8.js"></script>

    






</body>
</html>
