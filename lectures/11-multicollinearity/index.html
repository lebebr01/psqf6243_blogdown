<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  
  
  <meta name="generator" content="Wowchemy 5.0.0-beta.1 for Hugo">
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Multicollinearity">

  
  <link rel="alternate" hreflang="en-us" href="https://psqf6243.brandonlebeau.org/lectures/11-multicollinearity/">

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

  
  
  
  <meta name="theme-color" content="#1565c0">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous" media="print" onload="this.media='all'">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js" integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.3aad675291f323c3cd47ae187f0bf0d6.css">

  




  

  


  
  

  

  
  <link rel="manifest" href="/index.webmanifest">
  

  <link rel="icon" type="image/png" href="/images/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="https://psqf6243.brandonlebeau.org/lectures/11-multicollinearity/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="PSQF 6243">
  <meta property="og:url" content="https://psqf6243.brandonlebeau.org/lectures/11-multicollinearity/">
  <meta property="og:title" content="Multicollinearity | PSQF 6243">
  <meta property="og:description" content="Multicollinearity"><meta property="og:image" content="https://psqf6243.brandonlebeau.org/media/blue-balloon.jpg">
  <meta property="twitter:image" content="https://psqf6243.brandonlebeau.org/media/blue-balloon.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2021-10-13T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2021-10-13T00:00:00&#43;00:00">
  

  



  


  


  





  <title>Multicollinearity | PSQF 6243</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper  ">

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7de282f2047be3c570af3a58788341e7.js"></script>

  

<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">PSQF 6243</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">PSQF 6243</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#logistics"><span>Logistics</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/content/"><span>Content</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/lectures/"><span>Lecture Notes</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/assignments/"><span>Assignments</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/code/"><span>Software Resources</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#people"><span>People</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    





<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <button class="form-control sidebar-search js-search">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">Search...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      
      
      


  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
        <li class=""><a href="/lectures/">Lecture Notes</a></li>
    
      


  <li class=""><a href="/lectures/review/">Review</a></li>



  <li class=""><a href="/lectures/review-class/">Review - class</a></li>



  <li class=""><a href="/lectures/intro-regression/">Intro to Linear Regression</a></li>



  <li class=""><a href="/lectures/linear-regression-class/">Intro to Linear Regression - class</a></li>



  <li class=""><a href="/lectures/regression-estimates/">Linear Regression Estimates</a></li>



  <li class=""><a href="/lectures/regression-estimates-class/">Linear Regression Estimates - class</a></li>



  <li class=""><a href="/lectures/least-squares-simulation/">Least Square Simulation</a></li>



  <li class=""><a href="/lectures/regression-inference-p1/">Regression Inference - Part 1</a></li>



  <li class=""><a href="/lectures/05-regression-inference/">Regression Inference - Part 1</a></li>



  <li class=""><a href="/lectures/05a-regression-inference/">Regression Inference - Part 2</a></li>



  <li class=""><a href="/lectures/05a-regression-inference-class/">Regression Inference - Part 2 - Class</a></li>



  <li class=""><a href="/lectures/06-t-vs-norm/">t vs Normal</a></li>



  <li class=""><a href="/lectures/07-regression-assumptions/">Regression Assumptions</a></li>



  <li class=""><a href="/lectures/07a-regression-assumptions/">Regression Assumptions - New Package</a></li>



  <li class=""><a href="/lectures/08-bootstrap/">Regression Bootstrap</a></li>



  <li class=""><a href="/lectures/08-bootstrap-class/">Regression Bootstrap - Class</a></li>



  <li class=""><a href="/lectures/09-multiple-regression-p1/">Multiple Regression - Part 1</a></li>



  <li class=""><a href="/lectures/09-multiple-regression-p1-class/">Multiple Regression - Part 1</a></li>



  <li class=""><a href="/lectures/10-model-comparison/">Model Comparison</a></li>



  <li class=""><a href="/lectures/10-model-comparison-class/">Model Comparison</a></li>



  <li class="active"><a href="/lectures/11-multicollinearity/">Multicollinearity</a></li>



  <li class=""><a href="/lectures/11-multicollinearity-class/">Multicollinearity</a></li>



  <li class=""><a href="/lectures/12-regression-categorical/">Regression Categorical Predictors</a></li>



  <li class=""><a href="/lectures/12-regression-categorical-class/">Regression Categorical Predictors</a></li>

      
    

    
      </ul>
    

  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          

          <h1>Multicollinearity</h1>

          <div class="article-style">
            
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">

</div>

<div id="multicollinearity" class="section level1">
<h1>Multicollinearity</h1>
<p>Multicollinearity is an assumption of regression that explores whether the predictor attributes (X) are correlated. Linear regression assumes that the predictor attributes are uncorrelated, but in practice this assumption is never met. What impacts does multicollinearity have on the linear regression? The short answer is that the regression parameters (the <span class="math inline">\(\beta\)</span> terms) will be more or less unbiased, however, the same cannot be said for the standard errors.</p>
<p>Let’s first use some real data to explore this, then we’ll use simulated data to show the impact correlated predictor attributes have on the linear regression estiamtes.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.5     ✓ dplyr   1.0.7
## ✓ tidyr   1.1.4     ✓ stringr 1.4.0
## ✓ readr   2.0.2     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(ggformula)</code></pre>
<pre><code>## Loading required package: ggstance</code></pre>
<pre><code>## 
## Attaching package: &#39;ggstance&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:ggplot2&#39;:
## 
##     geom_errorbarh, GeomErrorbarh</code></pre>
<pre><code>## Loading required package: scales</code></pre>
<pre><code>## 
## Attaching package: &#39;scales&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     discard</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     col_factor</code></pre>
<pre><code>## Loading required package: ggridges</code></pre>
<pre><code>## 
## New to ggformula?  Try the tutorials: 
##  learnr::run_tutorial(&quot;introduction&quot;, package = &quot;ggformula&quot;)
##  learnr::run_tutorial(&quot;refining&quot;, package = &quot;ggformula&quot;)</code></pre>
<pre class="r"><code>theme_set(theme_bw(base_size = 18))

college &lt;- read_csv(&quot;https://raw.githubusercontent.com/lebebr01/statthink/main/data-raw/College-scorecard-4143.csv&quot;) %&gt;%
  mutate(act_mean = actcmmid - mean(actcmmid, na.rm = TRUE),
         cost_mean = costt4_a - mean(costt4_a, na.rm = TRUE)) %&gt;%
  drop_na(act_mean, cost_mean)</code></pre>
<pre><code>## Rows: 7058 Columns: 16</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (6): instnm, city, stabbr, preddeg, region, locale
## dbl (10): adm_rate, actcmmid, ugds, costt4_a, costt4_p, tuitionfee_in, tuiti...</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>adm_mult_reg &lt;- lm(adm_rate ~ actcmmid + costt4_a, data = college)

summary(adm_mult_reg)</code></pre>
<pre><code>## 
## Call:
## lm(formula = adm_rate ~ actcmmid + costt4_a, data = college)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.65484 -0.12230  0.02291  0.13863  0.37054 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1.135e+00  3.326e-02  34.130  &lt; 2e-16 ***
## actcmmid    -1.669e-02  1.650e-03 -10.114  &lt; 2e-16 ***
## costt4_a    -2.304e-06  4.047e-07  -5.693 1.55e-08 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.1813 on 1278 degrees of freedom
## Multiple R-squared:  0.1836, Adjusted R-squared:  0.1824 
## F-statistic: 143.8 on 2 and 1278 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>library(mosaic)</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;mosaic&#39;:
##   method                           from   
##   fortify.SpatialPolygonsDataFrame ggplot2</code></pre>
<pre><code>## 
## The &#39;mosaic&#39; package masks several functions from core packages in order to add 
## additional features.  The original behavior of these functions should not be affected by this.</code></pre>
<pre><code>## 
## Attaching package: &#39;mosaic&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:Matrix&#39;:
## 
##     mean</code></pre>
<pre><code>## The following object is masked from &#39;package:scales&#39;:
## 
##     rescale</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     count, do, tally</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     cross</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     stat</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,
##     quantile, sd, t.test, var</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     max, mean, min, prod, range, sample, sum</code></pre>
<pre class="r"><code>cor(actcmmid ~ costt4_a, data = college)</code></pre>
<pre><code>## [1] 0.5557307</code></pre>
<div id="variance-inflation-factor" class="section level2">
<h2>Variance Inflation Factor</h2>
<p>The variance inflation factor (VIF) is a commonly used statistic to aid in diagnosing multicollinearity. It attempts to estimate how much the variance of the estimated regression equation is inflated due to correlated predictor attributes.</p>
<p>First, this can be calculated from the car package, using the function <code>vif()</code>.</p>
<pre class="r"><code>library(car)</code></pre>
<pre><code>## Loading required package: carData</code></pre>
<pre><code>## 
## Attaching package: &#39;car&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:mosaic&#39;:
## 
##     deltaMethod, logit</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     recode</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     some</code></pre>
<pre class="r"><code>vif(adm_mult_reg)</code></pre>
<pre><code>## actcmmid costt4_a 
## 1.446836 1.446836</code></pre>
<p>Fundamentally, the VIF is calculated with the following steps.</p>
<ol style="list-style-type: decimal">
<li>Fit a regression where one of the X attributes is the outcome and the remaining X attributes are predictors.</li>
<li>Calculate VIF: <span class="math inline">\(VIF = 1 / 1 - R^2\)</span> from step 1.</li>
<li>Repeate this for all X attributes.</li>
<li>Evaluate extent to which VIF is problematic. Rules of thumb include VIF statistics greater than 5 or 10.</li>
</ol>
<p>Interpretation wise, the square root of the VIF statistic can provide an indication of how inflated the standard error would be if the predictors are uncorrelated.</p>
<pre class="r"><code>act_lm &lt;- lm(actcmmid ~ costt4_a, data = college)
summary(act_lm)$r.square</code></pre>
<pre><code>## [1] 0.3088366</code></pre>
<pre class="r"><code>1 / (1 - .3088)</code></pre>
<pre><code>## [1] 1.446759</code></pre>
<pre class="r"><code>sqrt(1.446)</code></pre>
<pre><code>## [1] 1.202497</code></pre>
<div id="simulated-data-exploration" class="section level3">
<h3>Simulated data exploration</h3>
<p>Let’s use some simulated data to show the extent to which multicollinearity can be problematic, particularly for more highly correlated attributes.</p>
<p>First, let’s start with uncorrelated (on average) predictor attributes.</p>
<pre class="r"><code>library(simglm)

sim_args &lt;- list(formula = y ~ 1 + act + gpa + sat, 
                 fixed = list(act = list(var_type = &#39;continuous&#39;,
                                         mean = 20, 
                                         sd = 4),
                              gpa = list(var_type = &#39;continuous&#39;,
                                         mean = 2, 
                                         sd = .5),
                              sat = list(var_type = &#39;continuous&#39;,
                                         mean = 500, 
                                         sd = 100)),
                 correlate = list(fixed = data.frame(x = c(&#39;act&#39;, &#39;act&#39;, &#39;gpa&#39;), 
                                                     y = c(&#39;gpa&#39;, &#39;sat&#39;, &#39;sat&#39;), 
                                                     corr = c(0, 0, 0))),
                error = list(variance = 100),
                reg_weights = c(1, 1, 1, 1),
                 sample_size = 10000)

sim_data &lt;- simulate_fixed(data = NULL, sim_args) %&gt;%
   simulate_error(sim_args) %&gt;%
   correlate_variables(sim_args) %&gt;%
   generate_response(sim_args)

head(sim_data)</code></pre>
<pre><code>##   X.Intercept.  act_old  gpa_old  sat_old level1_id       error      act
## 1            1 18.93716 2.128093 522.7748         1   4.4354724 21.02474
## 2            1 18.23405 1.850263 460.1636         2  -2.8573650 18.80210
## 3            1 23.06432 2.162500 540.3209         3   4.9883250 21.30000
## 4            1 21.32715 1.564786 667.3779         4 -12.6093108 16.51829
## 5            1 14.64007 2.283516 664.7554         5  -1.5995179 22.26813
## 6            1 11.35145 1.425427 328.0208         6   0.3326494 15.40342
##        gpa      sat fixed_outcome random_effects        y
## 1 2.113874 473.4290      497.5677              0 502.0031
## 2 1.800818 455.8513      477.4542              0 474.5969
## 3 2.201605 576.6079      601.1095              0 606.0979
## 4 2.836889 533.1789      553.5340              0 540.9247
## 5 2.823777 366.0019      392.0938              0 390.4942
## 6 1.140104 283.7862      301.3297              0 301.6623</code></pre>
<pre class="r"><code>cor(sim_data[c(&#39;y&#39;, &#39;act&#39;, &#39;gpa&#39;, &#39;sat&#39;)])</code></pre>
<pre><code>##                y          act          gpa          sat
## y    1.000000000  0.041989788 -0.005333641  0.994314643
## act  0.041989788  1.000000000 -0.008255379  0.002824291
## gpa -0.005333641 -0.008255379  1.000000000 -0.008179386
## sat  0.994314643  0.002824291 -0.008179386  1.000000000</code></pre>
<pre class="r"><code>sim_lm &lt;- lm(y ~ 1 + act + gpa + sat, data = sim_data)
summary(sim_lm)</code></pre>
<pre><code>## 
## Call:
## lm(formula = y ~ 1 + act + gpa + sat, data = sim_data)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -39.348  -6.567   0.018   6.716  37.877 
## 
## Coefficients:
##              Estimate Std. Error  t value Pr(&gt;|t|)    
## (Intercept) 1.7085616  0.8148248    2.097  0.03603 *  
## act         0.9818107  0.0247873   39.609  &lt; 2e-16 ***
## gpa         0.6271848  0.1988455    3.154  0.00161 ** 
## sat         1.0008683  0.0009965 1004.422  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 9.943 on 9996 degrees of freedom
## Multiple R-squared:  0.9902, Adjusted R-squared:  0.9902 
## F-statistic: 3.369e+05 on 3 and 9996 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>vif(sim_lm)</code></pre>
<pre><code>##      act      gpa      sat 
## 1.000076 1.000135 1.000075</code></pre>
<p>Let’s now increase the correlation among the attributes.</p>
<pre class="r"><code>library(simglm)

sim_args &lt;- list(formula = y ~ 1 + act + gpa + sat, 
                 fixed = list(act = list(var_type = &#39;continuous&#39;,
                                         mean = 20, 
                                         sd = 4),
                              gpa = list(var_type = &#39;continuous&#39;,
                                         mean = 2, 
                                         sd = .5),
                              sat = list(var_type = &#39;continuous&#39;,
                                         mean = 500, 
                                         sd = 100)),
                 correlate = list(fixed = data.frame(x = c(&#39;act&#39;, &#39;act&#39;, &#39;gpa&#39;), 
                                                     y = c(&#39;gpa&#39;, &#39;sat&#39;, &#39;sat&#39;), 
                                                     corr = c(0.5, 0.5, 0.25))),
                error = list(variance = 100),
                reg_weights = c(1, 1, 1, 1),
                 sample_size = 10000)

sim_data &lt;- simulate_fixed(data = NULL, sim_args) %&gt;%
   simulate_error(sim_args) %&gt;%
   correlate_variables(sim_args) %&gt;%
   generate_response(sim_args)

head(sim_data)</code></pre>
<pre><code>##   X.Intercept.  act_old  gpa_old  sat_old level1_id       error      act
## 1            1 12.67205 1.883500 432.5663         1  -0.7004084 22.84314
## 2            1 17.16416 2.048975 365.7169         2  26.7224810 21.72202
## 3            1 23.10502 1.526559 528.5322         3   7.7038465 15.17476
## 4            1 19.76459 2.267508 405.6645         4  -5.1830562 21.94457
## 5            1 14.71320 2.601182 529.6703         5 -14.5971188 26.81802
## 6            1 26.84022 1.417073 463.8579         6   6.1968368 12.52899
##        gpa      sat fixed_outcome random_effects        y
## 1 2.468891 683.2149      709.5270              0 708.8265
## 2 2.689408 570.8892      596.3006              0 623.0231
## 3 1.571635 422.4404      440.1867              0 447.8906
## 4 2.531839 505.8480      531.3244              0 526.1413
## 5 2.301773 632.0864      662.2062              0 647.6090
## 6 1.685562 329.0757      344.2903              0 350.4871</code></pre>
<pre class="r"><code>cor(sim_data[c(&#39;y&#39;, &#39;act&#39;, &#39;gpa&#39;, &#39;sat&#39;)])</code></pre>
<pre><code>##             y       act       gpa       sat
## y   1.0000000 0.5406479 0.2794730 0.9947076
## act 0.5406479 1.0000000 0.5041948 0.5129605
## gpa 0.2794730 0.5041948 1.0000000 0.2618358
## sat 0.9947076 0.5129605 0.2618358 1.0000000</code></pre>
<pre class="r"><code>sim_lm2 &lt;- lm(y ~ 1 + act + gpa + sat, data = sim_data)
vif(sim_lm2)</code></pre>
<pre><code>##      act      gpa      sat 
## 1.694950 1.340889 1.357114</code></pre>
<pre class="r"><code>broom::tidy(sim_lm)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic   p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)    1.71   0.815         2.10 3.60e-  2
## 2 act            0.982  0.0248       39.6  7.62e-319
## 3 gpa            0.627  0.199         3.15 1.61e-  3
## 4 sat            1.00   0.000996   1004.   0</code></pre>
<pre class="r"><code>broom::tidy(sim_lm2)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic   p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)    0.865   0.604        1.43 1.52e-  1
## 2 act            1.00    0.0324      30.9  6.65e-200
## 3 gpa            1.04    0.230        4.52 6.24e-  6
## 4 sat            1.00    0.00115    867.   0</code></pre>
<pre class="r"><code>library(simglm)

sim_args &lt;- list(formula = y ~ 1 + act + gpa + sat, 
                 fixed = list(act = list(var_type = &#39;continuous&#39;,
                                         mean = 20, 
                                         sd = 4),
                              gpa = list(var_type = &#39;continuous&#39;,
                                         mean = 2, 
                                         sd = .5),
                              sat = list(var_type = &#39;continuous&#39;,
                                         mean = 500, 
                                         sd = 100)),
                 correlate = list(fixed = data.frame(x = c(&#39;act&#39;, &#39;act&#39;, &#39;gpa&#39;), 
                                                     y = c(&#39;gpa&#39;, &#39;sat&#39;, &#39;sat&#39;), 
                                                     corr = c(0.5, 0.9, 0.5))),
                error = list(variance = 100),
                reg_weights = c(1, 1, 1, 1),
                 sample_size = 10000)

sim_data &lt;- simulate_fixed(data = NULL, sim_args) %&gt;%
   simulate_error(sim_args) %&gt;%
   correlate_variables(sim_args) %&gt;%
   generate_response(sim_args)

head(sim_data)</code></pre>
<pre><code>##   X.Intercept.  act_old  gpa_old  sat_old level1_id       error      act
## 1            1 26.31874 2.222333 468.7522         1   0.1551384 15.08098
## 2            1 22.10340 2.708507 369.6122         2  10.0397868 20.55414
## 3            1 23.69555 1.853018 395.9834         3  -4.0630820 16.14552
## 4            1 12.86720 1.606162 396.5028         4  -3.8412851 25.03441
## 5            1 17.39167 2.540438 682.7210         5 -23.8731482 24.25769
## 6            1 15.22639 1.381100 569.3738         6   2.3571287 22.15267
##        gpa      sat fixed_outcome random_effects        y
## 1 1.766043 342.0033      359.8503              0 360.0055
## 2 2.513746 447.3252      471.3931              0 481.4329
## 3 2.196999 407.6292      426.9717              0 422.9087
## 4 2.841594 678.3689      707.2449              0 703.4036
## 5 1.445554 565.1414      591.8446              0 567.9715
## 6 1.925639 619.4183      644.4966              0 646.8537</code></pre>
<pre class="r"><code>cor(sim_data[c(&#39;y&#39;, &#39;act&#39;, &#39;gpa&#39;, &#39;sat&#39;)])</code></pre>
<pre><code>##             y       act       gpa       sat
## y   1.0000000 0.9040404 0.5144794 0.9952449
## act 0.9040404 1.0000000 0.5121976 0.9005934
## gpa 0.5144794 0.5121976 1.0000000 0.5109279
## sat 0.9952449 0.9005934 0.5109279 1.0000000</code></pre>
<pre class="r"><code>sim_lm3 &lt;- lm(y ~ 1 + act + gpa + sat, data = sim_data)
vif(sim_lm3)</code></pre>
<pre><code>##      act      gpa      sat 
## 5.397706 1.380057 5.388217</code></pre>
<pre class="r"><code>broom::tidy(sim_lm)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic   p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)    1.71   0.815         2.10 3.60e-  2
## 2 act            0.982  0.0248       39.6  7.62e-319
## 3 gpa            0.627  0.199         3.15 1.61e-  3
## 4 sat            1.00   0.000996   1004.   0</code></pre>
<pre class="r"><code>broom::tidy(sim_lm2)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic   p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)    0.865   0.604        1.43 1.52e-  1
## 2 act            1.00    0.0324      30.9  6.65e-200
## 3 gpa            1.04    0.230        4.52 6.24e-  6
## 4 sat            1.00    0.00115    867.   0</code></pre>
<pre class="r"><code>broom::tidy(sim_lm3)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)    0.393   0.543       0.723 4.70e- 1
## 2 act            1.03    0.0580     17.7   2.16e-69
## 3 gpa            1.11    0.235       4.73  2.29e- 6
## 4 sat            0.999   0.00232   431.    0</code></pre>
<pre class="r"><code>library(simglm)

sim_args &lt;- list(formula = y ~ 1 + act + gpa + sat, 
                 fixed = list(act = list(var_type = &#39;continuous&#39;,
                                         mean = 20, 
                                         sd = 4),
                              gpa = list(var_type = &#39;continuous&#39;,
                                         mean = 2, 
                                         sd = .5),
                              sat = list(var_type = &#39;continuous&#39;,
                                         mean = 500, 
                                         sd = 100)),
                 correlate = list(fixed = data.frame(x = c(&#39;act&#39;, &#39;act&#39;, &#39;gpa&#39;), 
                                                     y = c(&#39;gpa&#39;, &#39;sat&#39;, &#39;sat&#39;), 
                                                     corr = c(0.9, 0.98, 0.85))),
                error = list(variance = 100),
                reg_weights = c(1, 1, 1, 1),
                 sample_size = 10000)

sim_data &lt;- simulate_fixed(data = NULL, sim_args) %&gt;%
   simulate_error(sim_args) %&gt;%
   correlate_variables(sim_args) %&gt;%
   generate_response(sim_args)

head(sim_data)</code></pre>
<pre><code>##   X.Intercept.  act_old   gpa_old  sat_old level1_id      error      act
## 1            1 17.94498 1.6077358 663.6710         1  7.0943042 21.46272
## 2            1 26.30986 1.8619214 460.8821         2  1.0682473 13.57977
## 3            1 17.86721 1.1278256 586.6890         3 10.2197716 20.74377
## 4            1 13.79246 2.9330700 620.0455         4  3.1596355 27.61690
## 5            1 22.87507 0.9458789 369.9726         5 -0.9681679 15.45266
## 6            1 20.41202 2.7586212 308.2062         6 -6.4440856 20.71673
##        gpa      sat fixed_outcome random_effects        y
## 1 1.761928 551.3991      575.6237              0 582.7180
## 2 1.355568 342.2627      358.1981              0 359.2663
## 3 1.746966 553.3745      576.8652              0 587.0850
## 4 2.761993 655.1280      686.5069              0 689.6665
## 5 1.568053 428.1915      446.2122              0 445.2440
## 6 2.598143 489.6529      513.9678              0 507.5237</code></pre>
<pre class="r"><code>cor(sim_data[c(&#39;y&#39;, &#39;act&#39;, &#39;gpa&#39;, &#39;sat&#39;)])</code></pre>
<pre><code>##             y       act       gpa       sat
## y   1.0000000 0.9773489 0.8475283 0.9954344
## act 0.9773489 1.0000000 0.8984624 0.9799079
## gpa 0.8475283 0.8984624 1.0000000 0.8470347
## sat 0.9954344 0.9799079 0.8470347 1.0000000</code></pre>
<pre class="r"><code>sim_lm4 &lt;- lm(y ~ 1 + act + gpa + sat, data = sim_data)
vif(sim_lm4)</code></pre>
<pre><code>##      act      gpa      sat 
## 43.10596  6.06931 29.41023</code></pre>
<pre class="r"><code>broom::tidy(sim_lm)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic   p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)    1.71   0.815         2.10 3.60e-  2
## 2 act            0.982  0.0248       39.6  7.62e-319
## 3 gpa            0.627  0.199         3.15 1.61e-  3
## 4 sat            1.00   0.000996   1004.   0</code></pre>
<pre class="r"><code>broom::tidy(sim_lm2)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic   p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)    0.865   0.604        1.43 1.52e-  1
## 2 act            1.00    0.0324      30.9  6.65e-200
## 3 gpa            1.04    0.230        4.52 6.24e-  6
## 4 sat            1.00    0.00115    867.   0</code></pre>
<pre class="r"><code>broom::tidy(sim_lm3)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)    0.393   0.543       0.723 4.70e- 1
## 2 act            1.03    0.0580     17.7   2.16e-69
## 3 gpa            1.11    0.235       4.73  2.29e- 6
## 4 sat            0.999   0.00232   431.    0</code></pre>
<pre class="r"><code>broom::tidy(sim_lm4)</code></pre>
<pre><code>## # A tibble: 4 × 5
##   term        estimate std.error statistic       p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;
## 1 (Intercept)    0.947   0.521        1.82 0.0689       
## 2 act            0.971   0.164        5.94 0.00000000302
## 3 gpa            1.35    0.489        2.77 0.00568      
## 4 sat            1.00    0.00540    185.   0</code></pre>
</div>
</div>
</div>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/lectures/10-model-comparison-class/" rel="next">Model Comparison</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/lectures/11-multicollinearity-class/" rel="prev">Multicollinearity</a>
  </div>
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Last updated on Oct 13, 2021</p>

          



          




          


        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    
    
    
    Published with
    <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a>  —
    the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">
    open source</a> website builder that empowers creators.
    
  </p>
</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'event' : "Events",
        'slides' : "Slides"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/js/wowchemy.min.d4185df71ecf716f1c4e7ef5f3d4e2b8.js"></script>

    






</body>
</html>
